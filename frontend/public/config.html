<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>‚öôÔ∏è Configura√ß√µes - BSQA Card Writer</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>
<body>
  <div id="header" data-testid="config-header-container"></div>
  <div class="container" data-testid="config-main-container">
    <!-- Breadcrumbs -->
    <div class="breadcrumbs" data-testid="config-breadcrumbs-container">
      <!-- Breadcrumbs ser√£o preenchidos dinamicamente -->
    </div>
    
    <h1 data-testid="config-page-title">‚öôÔ∏è Configura√ß√µes do Usu√°rio</h1>
    <div class="config-section" data-testid="config-section-personal">
      <h2 data-testid="config-section-title-personal">üë§ Informa√ß√µes Pessoais</h2>
      <div class="config-item" data-testid="config-item-username">
        <label for="userName" data-testid="config-label-username">Nome do Usu√°rio <span title="Seu nome completo para identifica√ß√£o nos documentos gerados" style="color: var(--accent-color); cursor: help;" data-testid="config-help-username">‚ÑπÔ∏è</span></label>
        <input type="text" id="userName" placeholder="Seu nome completo" data-testid="config-input-username">
      </div>
      <div class="config-item" data-testid="config-item-email">
        <label for="userEmail" data-testid="config-label-email">Email <span title="Seu email para contato e identifica√ß√£o" style="color: var(--accent-color); cursor: help;" data-testid="config-help-email">‚ÑπÔ∏è</span></label>
        <input type="email" id="userEmail" placeholder="seu@email.com" data-testid="config-input-email">
      </div>
      <div class="config-item" data-testid="config-item-company">
        <label for="userCompany" data-testid="config-label-company">Empresa <span title="Nome da sua empresa para personaliza√ß√£o dos documentos" style="color: var(--accent-color); cursor: help;" data-testid="config-help-company">‚ÑπÔ∏è</span></label>
        <input type="text" id="userCompany" placeholder="Nome da empresa" data-testid="config-input-company">
      </div>
    </div>
    <div class="config-section" data-testid="config-section-preferences">
      <h2 data-testid="config-section-title-preferences">üìã Prefer√™ncias de Sa√≠da</h2>
      <div class="checkbox-item" data-testid="config-checkbox-autocopy">
        <input type="checkbox" id="autoCopy" data-testid="config-input-autocopy">
        <label for="autoCopy" data-testid="config-label-autocopy">Copiar resultado automaticamente <span title="Copia automaticamente o resultado para a √°rea de transfer√™ncia ap√≥s a gera√ß√£o" style="color: var(--accent-color); cursor: help;" data-testid="config-help-autocopy">‚ÑπÔ∏è</span></label>
      </div>
      <div class="checkbox-item" data-testid="config-checkbox-clear-success">
        <input type="checkbox" id="clearAfterSuccess" checked data-testid="config-input-clear-success">
        <label for="clearAfterSuccess" data-testid="config-label-clear-success">Limpar campos ap√≥s sucesso <span title="Limpa automaticamente os campos de entrada ap√≥s gerar uma resposta com sucesso" style="color: var(--accent-color); cursor: help;" data-testid="config-help-clear-success">‚ÑπÔ∏è</span></label>
      </div>
      <div class="checkbox-item disabled" data-testid="config-checkbox-history">
        <input type="checkbox" id="showHistory" disabled data-testid="config-input-history">
        <label for="showHistory" title="Funcionalidade em desenvolvimento - Em breve dispon√≠vel" data-testid="config-label-history">Mostrar hist√≥rico de an√°lises <span title="Permite visualizar e reutilizar an√°lises anteriores (funcionalidade em desenvolvimento)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-history">‚ÑπÔ∏è</span></label>
        <span style="color: var(--muted-text); font-size: 0.8em; margin-left: 0.5rem;" data-testid="config-text-development">(Em desenvolvimento)</span>
      </div>
    </div>
    <div class="config-section" data-testid="config-section-interface">
      <h2 data-testid="config-section-title-interface">üé® Configura√ß√µes de Interface</h2>
      <div class="config-item" data-testid="config-item-theme">
        <label for="theme" data-testid="config-label-theme">Tema <span title="Escolha entre tema escuro, claro ou autom√°tico baseado nas configura√ß√µes do sistema" style="color: var(--accent-color); cursor: help;" data-testid="config-help-theme">‚ÑπÔ∏è</span></label>
        <select id="theme" data-testid="config-select-theme">
          <option value="dark" data-testid="config-option-theme-dark">Escuro (Padr√£o)</option>
          <option value="light" data-testid="config-option-theme-light">Claro</option>
          <option value="auto" data-testid="config-option-theme-auto">Autom√°tico</option>
        </select>
      </div>
    </div>
    <div class="config-section" id="ai-config" data-testid="config-section-ai">
      <h2 data-testid="config-section-title-ai">ü§ñ Configura√ß√µes de IA</h2>
              <div class="config-item" id="template-config" data-testid="config-item-default-analysis">
          <label for="defaultAnalyseType" data-testid="config-label-default-analysis">Tipo de An√°lise Padr√£o <span title="Selecione o tipo de an√°lise que ser√° usado por padr√£o" style="color: var(--accent-color); cursor: help;" data-testid="config-help-default-analysis">‚ÑπÔ∏è</span></label>
          <select id="defaultAnalyseType" data-testid="config-select-default-analysis">
            <option value="" data-testid="config-option-loading-analysis">Carregando tipos de an√°lise...</option>
          </select>
        </div>
      <div class="config-item" data-testid="config-item-default-ai">
        <label for="defaultAI" data-testid="config-label-default-ai">IA Padr√£o <span title="Selecione qual IA ser√° usada por padr√£o: OpenAI ou StackSpot AI" style="color: var(--accent-color); cursor: help;" data-testid="config-help-default-ai">‚ÑπÔ∏è</span></label>
        <select id="defaultAI" data-testid="config-select-default-ai">
          <option value="openai" data-testid="config-option-default-openai">OpenAI</option>
          <option value="stackspot" data-testid="config-option-default-stackspot">StackSpot AI</option>
        </select>
        <div id="defaultAIWarning" style="display:none; color: #f44336; font-size: 0.95em; margin-top: 0.5rem;" data-testid="config-warning-default-ai"></div>
      </div>
      <fieldset style="border: 2px solid #4caf50; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;" data-testid="config-fieldset-openai">
        <legend style="color: #4caf50; font-weight: bold; padding: 0 0.5rem;" data-testid="config-legend-openai">OpenAI</legend>
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;" data-testid="config-openai-header">
          <label data-testid="config-label-openai-settings">üîë Configura√ß√µes OpenAI <span title="Configura√ß√µes necess√°rias para usar a OpenAI" style="color: var(--accent-color); cursor: help;" data-testid="config-help-openai-settings">‚ÑπÔ∏è</span></label>
          <div style="display: flex; align-items: center;" data-testid="config-openai-enable-container">
            <input type="checkbox" id="openaiEnabled" style="margin-right: 0.5rem;" data-testid="config-checkbox-openai-enabled">
            <label for="openaiEnabled" style="margin: 0; font-size: 0.9em;" data-testid="config-label-openai-enabled">Habilitar OpenAI</label>
          </div>
        </div>
        <div class="config-item" data-testid="config-item-openai-key">
          <label for="openaiApiKey" data-testid="config-label-openai-key">API Key <span title="Sua chave de API da OpenAI (obrigat√≥rio para usar OpenAI)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-openai-key">‚ÑπÔ∏è</span></label>
          <input type="password" id="openaiApiKey" placeholder="sk-..." disabled data-testid="config-input-openai-key">
        </div>
        <div class="config-item" data-testid="config-item-max-tokens">
          <label for="maxTokens" data-testid="config-label-max-tokens">M√°ximo de Tokens <span title="N√∫mero m√°ximo de tokens para gerar a resposta. Valores maiores geram respostas mais detalhadas" style="color: var(--accent-color); cursor: help;" data-testid="config-help-max-tokens">‚ÑπÔ∏è</span></label>
          <input type="text" id="maxTokens" placeholder="1000" value="1000" data-testid="config-input-max-tokens">
        </div>
      </fieldset>
      <fieldset style="border: 2px solid #2196f3; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;" data-testid="config-fieldset-stackspot">
        <legend style="color: #2196f3; font-weight: bold; padding: 0 0.5rem;" data-testid="config-legend-stackspot">StackSpot AI</legend>
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;" data-testid="config-stackspot-header">
          <label data-testid="config-label-stackspot-settings">üîë Configura√ß√µes StackSpot AI <span title="Configura√ß√µes necess√°rias para usar o StackSpot AI" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-settings">‚ÑπÔ∏è</span></label>
          <div style="display: flex; align-items: center;" data-testid="config-stackspot-enable-container">
            <input type="checkbox" id="stackspotEnabled" style="margin-right: 0.5rem;" data-testid="config-checkbox-stackspot-enabled">
            <label for="stackspotEnabled" style="margin: 0; font-size: 0.9em;" data-testid="config-label-stackspot-enabled">Habilitar StackSpot AI</label>
          </div>
        </div>
        <div class="config-item" data-testid="config-item-stackspot-client-id">
          <label for="stackspotClientId" data-testid="config-label-stackspot-client-id">Client ID <span title="ID do cliente StackSpot (obrigat√≥rio)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-client-id">‚ÑπÔ∏è</span></label>
          <input type="text" id="stackspotClientId" placeholder="seu-client-id" disabled data-testid="config-input-stackspot-client-id">
        </div>
        <div class="config-item" data-testid="config-item-stackspot-client-secret">
          <label for="stackspotClientSecret" data-testid="config-label-stackspot-client-secret">Client Secret <span title="Chave secreta do cliente StackSpot (obrigat√≥rio)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-client-secret">‚ÑπÔ∏è</span></label>
          <input type="password" id="stackspotClientSecret" placeholder="seu-client-secret" disabled data-testid="config-input-stackspot-client-secret">
        </div>
        <div class="config-item" data-testid="config-item-stackspot-realm">
          <label for="stackspotRealm" data-testid="config-label-stackspot-realm">Realm <span title="Realm do StackSpot (obrigat√≥rio)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-realm">‚ÑπÔ∏è</span></label>
          <input type="text" id="stackspotRealm" placeholder="seu-realm" disabled data-testid="config-input-stackspot-realm">
        </div>
        <div class="config-item" data-testid="config-item-stackspot-agent-id">
          <label for="stackspotAgentId" data-testid="config-label-stackspot-agent-id">Agent ID <span title="ID do agente StackSpot (obrigat√≥rio)" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-agent-id">‚ÑπÔ∏è</span></label>
          <input type="text" id="stackspotAgentId" placeholder="seu-agent-id" disabled data-testid="config-input-stackspot-agent-id">
        </div>
        <div class="config-item" data-testid="config-item-stackspot-advanced">
          <label data-testid="config-label-stackspot-advanced">Configura√ß√µes StackSpot AI <span title="Configura√ß√µes espec√≠ficas para o StackSpot AI" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-advanced">‚ÑπÔ∏è</span></label>
          <div class="checkbox-item" data-testid="config-checkbox-streaming">
            <input type="checkbox" id="streaming" data-testid="config-input-streaming">
            <label for="streaming" data-testid="config-label-streaming">Streaming (resposta em tempo real) <span title="Ativa o modo streaming para receber respostas em tempo real do StackSpot AI" style="color: var(--accent-color); cursor: help;" data-testid="config-help-streaming">‚ÑπÔ∏è</span></label>
          </div>
          <div class="checkbox-item" data-testid="config-checkbox-stackspot-knowledge">
            <input type="checkbox" id="stackspotKnowledge" data-testid="config-input-stackspot-knowledge">
            <label for="stackspotKnowledge" data-testid="config-label-stackspot-knowledge">Usar conhecimento StackSpot <span title="Utiliza o conhecimento espec√≠fico do StackSpot para melhorar as respostas" style="color: var(--accent-color); cursor: help;" data-testid="config-help-stackspot-knowledge">‚ÑπÔ∏è</span></label>
          </div>
          <div class="checkbox-item" data-testid="config-checkbox-return-ks">
            <input type="checkbox" id="returnKsInResponse" data-testid="config-input-return-ks">
            <label for="returnKsInResponse" data-testid="config-label-return-ks">Retornar KS na resposta <span title="Inclui informa√ß√µes do Knowledge Source (KS) na resposta gerada" style="color: var(--accent-color); cursor: help;" data-testid="config-help-return-ks">‚ÑπÔ∏è</span></label>
          </div>
        </div>
      </fieldset>
      <!-- Bot√µes de a√ß√£o -->
      <div class="config-item" style="margin-top: 1rem;" data-testid="config-actions-container">
        <div style="display: flex; gap: 1rem; justify-content: center;" data-testid="config-buttons-container">
          <button onclick="testApiConfig()" class="primary-btn" style="width: 200px; font-size: 0.9em;" data-testid="config-button-test-api">
            üß™ Testar conex√£o com IA
          </button>
          <button class="save-btn" id="saveBtn" style="width: 200px;" data-testid="config-button-save">üíæ Salvar Configura√ß√µes</button>
        </div>
        <div id="testResult" style="margin-top: 0.5rem; padding: 0.5rem; border-radius: 4px; display: none;" data-testid="config-test-result"></div>
      </div>
    </div>
    <div id="statusMessage" class="status-message" data-testid="config-status-message"></div>
  </div>
  <div id="modal" data-testid="config-modal-container"></div>
  <div id="footer" data-testid="config-footer-container"></div>
  <script src="js/apiConfig.js"></script>
  <script type="module" src="js/main.js"></script>
  <script type="module" src="js/config.js"></script>
</body>
</html> 