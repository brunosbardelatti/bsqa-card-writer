<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BSQA Card Writer</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>
<body>
  <div id="header" data-testid="chat-header-container"></div>
  <div class="container" data-testid="chat-main-container">
    <!-- Breadcrumbs -->
    <div class="breadcrumbs" data-testid="chat-breadcrumbs-container">
      <!-- Breadcrumbs serÃ£o preenchidos dinamicamente -->
    </div>
    
    <h1 data-testid="chat-title">ğŸ’¬ Chat de AnÃ¡lise</h1>
    <p class="subtitle" data-testid="chat-subtitle">Insira seus requisitos e receba sugestÃµes de casos de teste com IA</p>
    
    <form id="reqForm" data-testid="chat-form">
    <label style="width: 100%;" data-testid="chat-label-requirements">
      <textarea id="requirements" name="requirements" rows="10" placeholder="Digite seus requisitos aqui ou selecione um arquivo" data-testid="chat-textarea-requirements"></textarea>
    </label>
    <div style="display: flex; flex-direction: row; align-items: flex-start; width: 100%; gap: 1rem; margin-top: 0.5rem;">
      <div style="flex: 1; min-width: 220px;">
        <div class="drop-zone" id="dropZone" data-testid="chat-drop-zone">
          Arraste e solte seu PDF, TXT ou JSON aqui<br>
          <span style="color: #ffffff; text-decoration: underline;">Escolha um arquivo</span>
          <input type="file" id="fileInput" name="file" accept=".pdf,.txt,.json" data-testid="chat-file-input">
          <div class="drop-feedback" id="dropFeedback" style="display:none;" data-testid="chat-drop-feedback"></div>
          <button class="drop-remove-btn" id="dropRemoveBtn" style="display:none;" title="Remover arquivo" data-testid="chat-button-remove-file">Ã—</button>
        </div>
      </div>
      <div style="display: flex; flex-direction: column; align-items: stretch; gap: 1rem; flex: 0 0 200px; max-width: 200px; min-width: 160px;">
        <div class="select-group" data-testid="chat-select-group-ia">
          <label for="service" data-testid="chat-label-ia-service">
            ğŸ¤– IA de AnÃ¡lise
          </label>
          <select id="service" name="service" data-testid="chat-select-ia-service">
          <option value="openai" data-testid="chat-option-ia-openai">OpenAI</option>
          <option value="stackspot" data-testid="chat-option-ia-stackspot">StackSpot AI</option>
        </select>
        </div>
        
        <div class="select-group" data-testid="chat-select-group-analysis-type">
          <label for="analyse_type" data-testid="chat-label-analysis-type">
            ğŸ“‹ Tipo de AnÃ¡lise
          </label>
          <select id="analyse_type" name="analyse_type" data-testid="chat-select-analysis-type">
            <option value="" data-testid="chat-option-analysis-type-loading">Carregando tipos de anÃ¡lise...</option>
        </select>
        </div>
        
        <button type="submit" class="submit-btn" data-testid="chat-button-submit">
          ğŸš€ Enviar
        </button>
      </div>
    </div>
    </form>
    <div id="output" data-testid="chat-output-container"></div>
  </div>
  <div id="footer" data-testid="chat-footer-container"></div>
  <script type="module" src="js/main.js"></script>
  <script src="js/apiConfig.js"></script>
<script type="module" src="js/chat.js"></script>
</body>
</html>
