name: Code Review powered by BSQA AI

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  code-review:
    uses: brunosbardelatti/bsqa_code_review/.github/workflows/ai-code-review.yml@main
    with:
      gist_url: https://gist.githubusercontent.com/brunosbardelatti/f49bcfbabcc3489b4549283cae00cfd7/raw/c50d1107c3ff2ae3bb58c53c443208da73fb80bb/prompt_template_code_review_diff.txt
    secrets:
      STACKSPOT_CLIENT_ID: ${{ secrets.STACKSPOT_CLIENT_ID }}
      STACKSPOT_CLIENT_SECRET: ${{ secrets.STACKSPOT_CLIENT_SECRET }}
      STACKSPOT_AGENT_ID: ${{ secrets.STACKSPOT_AGENT_ID }}
      BSQA_GITHUB_TOKEN: ${{ secrets.BSQA_GITHUB_TOKEN }}